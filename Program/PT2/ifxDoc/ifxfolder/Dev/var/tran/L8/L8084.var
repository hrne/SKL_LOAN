----- BASIC LABEL Variables ----------
<sub type="SYS">
</sub>

<sub type="SYS" name="label">

![資料表頭(HEADER)長度]
#INQHD=n,3,S
E(0,122)ASGN(INQHD$)

![每筆資料明細(OCCURS)長度]
#INQLEN=n,3,S
E(0,197)ASGN(INQLEN$)

![多筆查詢之一個畫面有N筆資料]
#INQREC=n,2,S
E(0,10)ASGN(INQREC$)

![畫面顯示的明細間的高度]
#LOOPH=n,3,S
E(0,1)ASGN(LOOPHEIGHT$)

![每張印錄單列印的筆數]
#INQPRT=n,2,S
E(0,40)ASGN(INQPRT$)


</sub>

<sub type="DC" name="BFHEAD">
<include src="COM.icf::BFHEAD2.dec"/>

#button=x,100,S
K(MODIFYBUTTON,查詢)

#ReviewTypeH=x,100,S
T(3,H:高風險;M:中風險;L:低風險)

#ProcessTypeH=x,100,S
T(3,1:郵寄-定期審查客戶基本資料更新表（房貸自然人）;2:郵寄-放款本息攤還表暨息通知單;3:簡訊通知)

</sub>

!---------- 交易畫面及個別交易變數宣告 ----------
<sub type="DC" name="p1" layout="cols=1;screen.width=[200,800];printer.width=[20,20];">
[
["[L8084]                                 AML定審通知查詢"],
["#FdDataDt+定審日期",#iDataDt],
["#FdCustKey+身分證字號／統一編號",#iCustKey],
]
!["@顯示方式",
!<include src="COM.icf::RPTFG.scr"/>
!],
!---------- AP Button AREA ----------


!---------- AP TEXT AREA Variables ----------


#CHAIN=A,1,S
T(4,CHAIN$) 
IF(#CHAIN!=1,V(P,此為連動交易，請從交易:L8081/L8082/L8083進入),$)

#NTXBUF=X,17,S
C(3,#CHAIN,1,T(4,NTXBUF$),S)
T(1,@iDataDt,#NTXBUF,1,7)
T(1,@iCustKey,#NTXBUF,8,10)

#FdDataDt=X,2,L
C(3,#CHAIN,1,T(F,@iDataDt,0),T(3,*))

#FdCustKey=X,2,L
C(3,#CHAIN,1,T(F,@iCustKey,0),T(3,*))

#LC014Mrkey=x,100,S
T(2,#iDataDt+-+#iCustKey)

#LC014Note=x,100,S
T(2,日期:+#iDataDt+/ID:+#iCustKey+ AML定審通知附件)

#BufLC014=X,200,S
T(2,L81010000000000000+#LC014Mrkey+#LC014Note)

#Button=x,100,S
T(2,{cmd=CHAIN; ntxcd=LC104; ntxbuf=#BufLC014})ASGN(BTN_NEW1$)
K(MODIFYBUTTON,1,上傳附件)

#Button2=x,100,S
T(2,{cmd=CHAIN; ntxcd=LC014; ntxbuf=#BufLC014})ASGN(BTN_NEW2$)
K(MODIFYBUTTON,2,上傳附件查詢)


!#RPTFG=A,1,S
!E(0,0)

!定審日期
#iDataDt=D,7,I
C(3,#CHAIN,1,s,$)
@
V(7)
A(DATE,0,#iDataDt)

#iCustKey=X,10,I
C(3,#CHAIN,1,s,$)
@
V(7)


#RPTFG=A,1,S
E(0,1)


!<include src="COM.icf::RPTFG.dec"/>

#RPTFG=_,_,S

#TXMT=A,1,S
C(3,#CHAIN,1,XMT(),$)

</sub>

!---------- 輸出共用變數宣告區 ----------
<sub type="RTN" name="AFXMT">
<include src="PRT.icf::PRTHEAD.rtn"/>
</sub>

!---------- TXFORM = L8084----------
<sub type="FORM" name="L8084">
#SCRPRT=_,_,S
C(5,#TXFORM,L8084,$,S)

#SCRTIL=_,_,S
T(3,[L8084] AML定審通知查詢)


!------ TOM(HEAD)   Variables (FOR OUTPUT SCREEN) ------

#oDataDt=D,7,L
#oCustKey=X,10,L
#oReviewType=X,1,L
#oReviewTypeX=X,6,L
T(H,#oReviewType,#ReviewTypeH)
#oProcessType=X,1,L
#oProcessTypeX=X,50,L
T(H,#oProcessType,#ProcessTypeH)

#oIsStatus=A,2,L
#oIsStatusX=x,50,L
#oConfirmStatus=A,1,L
#oConfirmStatusX=x,50,L

!------ TOM(OCCURS) Variables (FOR OUTPUT SCREEN) ------
#LOOP=X,1,S
T(3,1)ASGN(LOOP$)

#oProcessDate=D,7,S
!#oProcessBrNo=X,4,S
#oProcessGroupNoX=x,20,S
!#oProcessTlrNo=X,6,S
#oProcessTlrItem=X,20,S
#oProcessMobile=X,10,S
#oProcessAddr=x,100,S
#oProcessName=x,40,S
#oProcessNote=x,40,S


!! ------- end of batch variables   -------------

					
</sub>


!------ 上行電文 ------
<sub type="TIM">
#iDataDt
#iCustKey
#END
</sub>


!------ 下行電文TOM ------
<sub type="TOM">
<include src="COM.icf::TRCTL.tom"/>
TXFORM=L8084
#oDataDt
#oCustKey
#oReviewType
#oIsStatus
#oIsStatusX
#oConfirmStatus
#oConfirmStatusX
#oProcessType
#oProcessDate
#oProcessGroupNoX
#oProcessTlrItem
#oProcessMobile
#oProcessAddr
#oProcessName
#oProcessNote
^
</sub>

!--------- OUTPUT畫面 --------

<sub type="PART" name="L8084" layout="cols=1;screen.width=[200,800];printer.width=[20,20];">
[
["[L8084]                                 AML定審通知查詢"],
["@@@定審日期",#oDataDt],
["@@@身分證字號／統一編號",#oCustKey],
["@@@評@@@@級",#oReviewType,#oReviewTypeX],   
["@@@定審狀態",#oIsStatus,#oIsStatusX],   
["@@@名單類型",#oConfirmStatus,#oConfirmStatusX],   
["@@@通知類別",#oProcessType,#oProcessTypeX],   
]
</sub>

!---------- 單據輸出組合 ----------

<sub type="SELECT">

#RPTFG=1,QUERY.GRID,L8084
#any={detail:true, header:'L8084.part', caption:'', width:1000, rowNum:20, rowList:[20,40,60]}

#oProcessDate=通知日期
{width:100,align:'center'}

#oProcessGroupNoX=通知單位
{width:100,align:'center'}

#oProcessTlrItem=通知經辦
{width:100,align:'center'}

#oProcessMobile=通知簡訊電話
{width:120,align:'center'}

#oProcessAddr=通知郵寄地址
{width:350,align:'left'}

#oProcessName=通知郵寄名稱
{width:200,align:'left'}

#oProcessNote=通知備註
{width:200,align:'left'}

^
</sub>
