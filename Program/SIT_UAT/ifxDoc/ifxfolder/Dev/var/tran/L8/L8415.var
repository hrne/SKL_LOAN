----- BASIC LABEL Variables ----------
<sub type="SYS">
</sub>

<sub type="SYS" name="label">

!#TXCD
!T(3,L8415)

![資料表頭(HEADER)長度]
#INQHD=n,3,S
E(0,27)ASGN(INQHD$)

![每筆資料明細(OCCURS)長度]
#INQLEN=n,3,S
E(0,75)ASGN(INQLEN$)

![多筆查詢之一個畫面有N筆資料]
#INQREC=n,2,S
E(0,20)ASGN(INQREC$)

![畫面顯示的明細間的高度]
#LOOPH=n,3,S
E(0,1)ASGN(LOOPHEIGHT$)

![每張印錄單列印的筆數]
#INQPRT=n,2,S
E(0,40)ASGN(INQPRT$)

</sub>

<sub type="DC" name="BFHEAD">
<include src="COM.icf::BFHEAD.dec"/>
!起始交易記號  0:起始交易,1:非起始交易
#ORGFG=_,_,S
E(0,0)

</sub>

!---------- 交易畫面及個別交易變數宣告 ----------
<sub type="DC" name="p1" layout="cols=1;screen.width=[180,820];printer.width=[20,20];">
[
["[L8415]                                 JCIC檔案匯出作業(052)"],
["#FdSubmitType+功能,"#SubmitType,#SubmitTypeX],
["#FdSubmitKey+報送金融機構代號",#SubmitKey,#ShowSubmitKey],
["#FdReportDate+報送日期",#ReportDate],
["#FdReportTime+報送次數",#ReportTime],
]
!---------- AP Button AREA ----------
![Buttom資料查詢]


! ENABLE(#BTN2)ENABLE(#BTN3)
#FdSubmitType=X,2,L
T(3,*)
#FdSubmitKey=X,2,L
#FdReportDate=X,2,L
#FdReportTime=X,2,L
#Space=X,1,S
E(0,1)ASGN(AGAIN$)
!---------- Required Input Setting ----------
<include src="HELPRIM.icf::HELPRIM.rtn"/>
#CDDEF0001=x,20,S
T(3,CdCode.TranCode)
#TranCodeHelp=x,2024,S

#CDDEF0002=x,20,S
T(3,CdCode.SubmitType)
#SubmitTypeHelp=x,1024,S

#HelpRim=X,1,S
RESET_RIM(#HelpRim,XXR99)
S(XXR99,01,#CDDEF0001,#CDDEF0002)
R(1,XXR99)
CALL(#HelpProc)
T(2,@TranCodeHelp,#HelpDesc1)
T(2,@SubmitTypeHelp,#HelpDesc2)
T(2,@SubmitKey,458)

#DateX=X,8,S
T(4,#SYSCDATE)
T(1,@ReportDate,#DateX,2,7)

! 報送類別
#SubmitType=A,1,I
HELP(#SubmitTypeHelp)
@V(H,#SubmitTypeHelp)
#SubmitTypeX=X,10,L
T(H,#SubmitType,#SubmitTypeHelp)

! 報送次數暫定為1，有需要再改
T(2,@ReportTime,1)


!報送金融機構代號
#SubmitKey=X,3,L


#ShowSubmitKey=X,10,L

!報送日期
#ReportDate=D,7,L

!報送次數
#ReportTime=X,3,L

! 交易代號
#TranCode=X,3,L
T(2,052)
#RPTFG=X,1,S
E(0,0) 
</sub>

!---------- 輸出共用變數宣告區 ----------
<sub type="RTN" name="AFXMT">
<include src="PRT.icf::PRTHEAD.rtn"/>
</sub>


!---------- TXFORM = L8415 ----------
<sub type="FORM" name="L8415">

! 媒體檔FileNo
#ReFileNo=X,8,S
E(2,@FileNo,#ReFileNo)
#FileNo=A,8,S

! 媒體檔FileNo
#PdfPrtM=A,1,S
C(3,#FileNo,0,E(0,0),E(0,1))

</sub>


!------ 上行電文 ------
<sub type="TIM">
#TranCode
#SubmitType
#SubmitKey
#ReportDate
#ReportTime
</sub>


!------ 下行電文TOM ------
<sub type="TOM">
TXFORM=L8415^
#ReFileNo
<include src="COM.icf::TRCTL.tom"/>
<include src="HELPRIM.icf::HELPRIM.tom"/>
</sub>

!---------- 單據輸出組合 ----------
<sub type="SELECT">
<include src="PRT.icf::INQ01.sel"/>
#PdfPrtM=1,PDF,,,,,,,,,,,,,ReFileNo;3,票據媒體檔
^
</sub>
