----- BASIC LABEL Variables ----------
<sub type="SYS">
</sub>

<sub type="SYS" name="label">

![資料表頭(HEADER)長度]
#INQHD=n,3,S
E(0,0)ASGN(INQHD$)

![每筆資料明細(OCCURS)長度]
#INQLEN=n,3,S
E(0,299)ASGN(INQLEN$)

![多筆查詢之一個畫面有N筆資料]
#INQREC=n,2,S
E(0,20)ASGN(INQREC$)

![畫面顯示的明細間的高度]
#LOOPH=n,3,S
E(0,1)ASGN(LOOPHEIGHT$)

![每張印錄單列印的筆數]
#INQPRT=n,2,S
E(0,40)ASGN(INQPRT$)

</sub>

<sub type="DC" name="BFHEAD">
#button=x,1,S
K(MODIFYBUTTON,查詢)



</sub>

!---------- 交易畫面及個別交易變數宣告 ----------
<sub type="DC" name="p1" layout="cols=1;screen.width=[150,850];printer.width=[20,20];">
[
["[LC005]                                 登錄提交資料查詢"],
["#FdEntdy+會計日期",#iEntdy],
["#FdBrNo+使用單位",#iBrNo],
["#FdTranNo+交易代碼",#iTranNo],
]
!---------- AP Button AREA ----------
!["@部@@@@門",#iGroupNo],

#FdEntdy=X,2,L

#FdBrNo=X,2,L

#FdTranNo=X,2,L


!---------- AP TEXT AREA Variables ----------
#CHAIN=A,1,S
T(4,CHAIN$)

#NTXBUF=X,3,S

#iEntdy=D,7,L
E(0,#SYSDATE)
D(8)
@V(7)A(DATE,0,#iEntdy)
V(5,0010101,#SYSDATE)

#iBrNo=X,4,L
T(2,#KINBR) 

#iGroupNo=X,1,S

!交易代碼
#iTranNo=X,5,I

#RPTFG=A,1,S
E(0,0)

</sub>

!---------- 輸出共用變數宣告區 ----------
<sub type="RTN" name="AFXMT">
<include src="PRT.icf::PRTHEAD.rtn"/>
</sub>

!---------- TXFORM = LC005 ----------
<sub type="FORM" name="LC005">

!#SCRPRT=_,_,S
!C(5,#TXFORM,LC005,$,S)

#SCRTIL=_,_,S
T(3,[LC005] 登錄提交資料查詢)

!------ TOM(HEAD)   Variables (FOR OUTPUT SCREEN) ------
!------ TOM(OCCURS) Variables (FOR OUTPUT SCREEN) ------
#LOOP=X,1,S
T(3,1)ASGN(LOOP$)

#CalDate=D,7,S

#CalTime=A,6,S
#CalHH=X,2,S
T(1,#CalTime,1,2)
#CalMM=X,2,S
T(1,#CalTime,3,2)
#CalSS=X,2,S
T(1,#CalTime,5,2)
#CalTimeX=X,8,S
T(2,#CalHH+:+#CalMM+:+#CalSS)

#Entdy=D,7,S
#TxNo=X,18,S

#TranNo=X,30,S
#TranCode=X,5,S
T(1,#TranNo,1,5)

#MrKey=X,20,S
#CurName=X,3,S

#TxAmt=m,14.2,S
#TxAmt1=m,14,S
E(0,#TxAmt)
#TxAmtX=X,17,S
C(3,#TxAmt1,0,T(3,)T(3,@CurName,),X(#TxAmt1)) ! 金額為0時隱藏幣別與金額

#BrNo=X,30,S
#TlrNo=X,20,S

#FlowType=X,1,S
#FlowStep=A,1,S
#TypeX=X,4,S
C(2,#FlowStep,$,T(3,登錄),$,T(3,審核),$)

#RejectReason=X,200,S

#Actfg=X,1,S
T(3,1)

#RimData=x,100,S
T(6A,#Entdy+#TxNo+#Actfg)

#BTN=X,1,S
BIND(grid,{ cmd=SendOut;once=1; ntxcd=#TranCode; txno=#RimData;rim=LCR05})

</sub>


!------ 上行電文 ------
<sub type="TIM">
#iEntdy#iBrNo#iGroupNo#iTranNo
#END
</sub>


!------ 下行電文TOM ------
<sub type="TOM">
TXFORM=LC005
#CalDate
#CalTime
#Entdy
#TxNo
#TranNo
#MrKey
#CurName
#TxAmt
#BrNo
#TlrNo
#FlowType
#FlowStep
#RejectReason
^
<include src="COM.icf::TRCTL.tom"/>
</sub>

!--------- OUTPUT畫面 --------

!---------- 單據輸出組合 ----------
<sub type="SELECT">

#RPTFG=0,QUERY.GRID,LC005
#any={detail:true, header:'LC005.part', caption:'', width:1000, rowNum:20, rowList:[20,40,60]}

#BTN=提交
{width:40,search:false,formatter:'cust:bind-button:提交',canExport:false,align:'center'}

#CalDate=交易日期
{width:100,align:'center'}

#CalTimeX=交易時間
{width:100,align:'center'}

#Entdy=會計日期
{width:100,align:'center'}

#TxNo=交易序號
{width:140,align:'center'}

#TranNo=交易代號
{width:200,align:'left'}

#MrKey=參考編號
{width:140,align:'left'}

#CurName=幣別
{width:40,align:'center'}

#TxAmtX=金額
{width:120,align:'right'}

#BrNo=使用單位
{width:150,align:'left'}

#TlrNo=經辦
{width:120,align:'left'}

#TypeX=類別
{width:80,align:'center'}

#RejectReason=主管退回原因
{width:200,align:'left'}

^

</sub>
