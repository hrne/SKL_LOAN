!---------- BASIC LABEL Variables ----------
<sub type="SYS">
</sub>

<sub type="SYS" name="label">

#TXCD
T(3,L2222)

</sub>
<sub type="PREDC" name="PreDC">
<include src="COM.icf::TITLE-RUN.pre"/>
</sub>


<sub type="DC" name="BFHEAD">
<include src="COM.icf::BFHEAD2.dec"/>


</sub>



!---------- 交易畫面及個別交易變數宣告 ----------
<sub type="DC" name="p1" layout="cols=1;screen.width=[250,750];printer.width=[20,50];order=1;">
[
["[L2222]                                 與授信戶關係登錄"],
["#FdNone+案件編號",#CreditSysNo],
["#FdNone+授信戶號",#CustNo+#CustName],
["#FdNone+關係人統編",#RelId,#RelName],
["#FdRelCode+與授信戶關係",#RelCode,#RelCodeX],
]

!---------- AP TEXT AREA Variables ----------
#FdNone=X,2,L
#FdRelCode=X,2,L
T(2,*)

#CHAIN=A,1,S
T(4,CHAIN$)
IF(#CHAIN!=1,V(P,此為連動交易，請從交易:L2022進入),$)
C(2,#CHAIN,$,T(F,@FunCode,0))


#NTXBUF=x,300,S
C(3,#CHAIN,1,T(4,NTXBUF$),S)
T(1,@CreditSysNo,#NTXBUF,1,7)
T(1,@CustNo,#NTXBUF,8,7)
T(1,@CustName,#NTXBUF,15,100)
T(1,@RelUKey,#NTXBUF,115,32)
T(1,@RelId,#NTXBUF,147,10)
T(1,@RelName,#NTXBUF,157,100)

!自動更新L2022機制
#AutoReFresh=A,1,S
C(3,#CHAIN,1,$,S)
E(0,1)
ASGN(CAUTO$)

<include src="HELPRIM.icf::HELPRIM.rtn"/>

#xxr99code=x,11,S
T(3,CdGuarantor)

#RelCodeHelp=x,3000,S

#HelpRim=X,1,S
RESET_RIM(#HelpRim,XXR99)
S(XXR99,01,#xxr99code)
R(1,XXR99)
CALL(#HelpProc)
T(2,@RelCodeHelp,#HelpDesc1)

#CreditSysNo=X,7,L

#CustNo=X,7,L

#CustName=x,2.50,L

#RelUKey=x,32,L

#RelId=x,10,L

#RelName=x,2.50,L

#RelCode=X,2,I
HELP(#RelCodeHelp)
@V(H,#RelCodeHelp)

#RelCodeX=x,30,L
T(H,#RelCode,#RelCodeHelp)

</sub>


!---------- 輸出共用變數宣告區 ----------
<sub type="RTN" name="AFXMT">
<include src="PRT.icf::PRTHEAD.rtn"/>

#PRTSC_RFG=X,1,S
C(3,#HCODE,1,S,$)
C(5,#TXFORM,L2222,$,S)

</sub>

!---------- TXFORM = L2222 ----------
<sub type="FORM" name="L2222">

#SCRPRT=_,_,S
C(5,#TXFORM,L2222,$,S)

#SCRTIL=_,_,S
T(3,[L2222] 與授信戶關係登錄)


</sub>


!------ 上行電文TIM：BASIC LABEL + AP TEXT AREA + AP TEXT ------
<sub type="TIM">
#CreditSysNo
#CustNo
#RelUKey
#RelCode
#END
</sub>
!------ 下行電文TOM ------
<sub type="TOM">
<include src="COM.icf::TRCTL.tom"/>
<include src="HELPRIM.icf::HELPRIM.tom"/>

TXFORM=L2222
^
</sub>

!---------- 單據輸出組合 ----------
<sub type="SELECT">
<include src="PRT.icf::UPD01.sel"/>
</sub>

