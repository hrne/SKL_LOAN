----- BASIC LABEL Variables ----------
<sub type="SYS">
</sub>

<sub type="SYS" name="label">

!#TXCD
!T(3,L8035)

![資料表頭(HEADER)長度]
#INQHD=n,3,S
E(0,0)ASGN(INQHD$)

![每筆資料明細(OCCURS)長度-Occ回來後去切的長度]
#INQLEN=n,3,S
E(0,40)ASGN(INQLEN$)

![多筆查詢之一個畫面有N筆資料]
#INQREC=n,2,S
E(0,20)ASGN(INQREC$)

![畫面顯示的明細間的高度]
#LOOPH=n,3,S
E(0,1)ASGN(LOOPHEIGHT$)

![每張印錄單列印的筆數]
#INQPRT=n,2,S
E(0,40)ASGN(INQPRT$)

</sub>

<sub type="DC" name="BFHEAD">
<include src="COM.icf::BFHEAD.dec"/>
!起始交易記號  0:起始交易,1:非起始交易
#ORGFG=_,_,S
E(0,0)
K(NOBUTTON,CLOSEY)

</sub>

!---------- 交易畫面及個別交易變數宣告 ----------
<sub type="DC" name="p1" layout="cols=1;screen.width=[200,800];printer.width=[20,20];">
[
["[L8035]                                 消債條列JCIC報送資料歷程查詢(044)"],
["#FdCustId+身分證字號",#CustId,#CustIdX],
["#FdSubmitKey+報送單位代號",#SubmitKey,#SubmitKeyX],
["#FdRcDate+協商申請日",#RcDate],
]


#FdCustId=X,2,L
#FdSubmitKey=X,2,L
#FdRcDate=X,2,L


!---------- AP TEXT AREA Variables ----------
#CHAIN=A,1,S
T(4,CHAIN$)
C(3,#CHAIN,0,V(P,本交易為連動交易，請由L8030連動進入),$)

<include src="HELPRIM.icf::HELPRIM.rtn"/>
<include src="ROM.icf::L8R01.dec"/>

! TranKey
#CDDEF0001=x,20,S
T(3,CdCode.TranKey)
#TranKeyHelp=x,1024,S

! DebtCode
#CDDEF0002=x,20,S
T(3,CdCode.DebtCode)
#DebtCodeHelp=x,1024,S

#GradeTypeDscp=X,50,S
T(3,0:非屬二階段還款;1:第一階段;2:第二階段)

#HelpRim=X,1,S
RESET_RIM(#HelpRim,XXR99)
S(XXR99,01,#CDDEF0001,#CDDEF0002)
R(1,XXR99)
CALL(#HelpProc)
T(2,@TranKeyHelp,#HelpDesc1)
T(2,@DebtCodeHelp,#HelpDesc2)

! 預設值
#Default=X,1,S
T(2,@SubmitKey,458)
#RimJcicBankCode=X,3,S
#RimL8r01=X,1,S
T(2,@RimJcicBankCode,#SubmitKey)
RESET_RIM(#RimL8r01,L8R01)
S(L8R01,1,#RimJcicBankCode)
R(1,L8R01)
T(2,@SubmitKeyX,#L8r01JcicBankName)

#NTXBUF=X,138,S
C(3,#CHAIN,1,T(4,NTXBUF$),S)
T(1,@ChainCd,#NTXBUF,1,5)
T(1,@Ukey,#NTXBUF,6,32)

#CustId=X,10,L

#CustIdX=X,2.50,L

#SubmitKey=X,3,L
#SubmitKeyX=X,80,L
#RcDate=D,7,L
<include src="ROM.icf::L8R55.dec"/>
#RimUkey=X,32,S
#RimChainCd=X,5,S
#RimL8r55=X,1,S
T(2,@RimUkey,#Ukey)
T(2,@RimChainCd,#ChainCd)
RESET_RIM(#RimL8r55,L8R55)
S(L8R55,1,#RimChainCd,#RimUkey)
R(1,L8R55)
T(2,@CustId,#L8r55CustId)
T(2,@SubmitKey,#L8r55SubmitKey)
E(0,@RcDate,#L8r55ApplyDate)

#RimCustId=X,10,S
<include src="ROM.icf::L8R57.dec"/>
T(2,@RimCustId,#CustId)
! 檢核該統編是否存在於客戶檔
#RimL8R57=X,1,S
RESET_RIM(#RimL8R57,L8R57)
S(L8R57,1,#RimCustId)
R(1,L8R57)
T(2,@CustIdX,#L8R57CustName)

#ChainCd=X,5,S
#Ukey=X,32,S
#RPTFG=A,1,S

#CHAINXMT=X,1,S
C(3,#CHAIN,1,E(0,@CHAIN,0)XMT(),$)
</sub>

!---------- 輸出共用變數宣告區 ----------
<sub type="RTN" name="AFXMT">
<include src="PRT.icf::PRTHEAD.rtn"/>
</sub>

!---------- TXFORM = L80350 ----------
<sub type="FORM" name="L8035">

#SCRTIL=_,_,S
T(3,[L8035] 消債條列JCIC報送資料歷程查詢)

#LOOP=X,1,S
T(3,1)ASGN(LOOP$)
! 以下固定
#OOTranKey=X,1,S
#OOTranKey_Tmp=X,10,S
T(H,#OOTranKey,#TranKeyHelp)
#OOTranKeyX=X,15,S
T(2,#OOTranKey+ - +#OOTranKey_Tmp)
! 以下變動
#OODebtCode=X,2,S
#OODebtCode_Tmp=X,10,S
T(H,#OODebtCode,#DebtCodeHelp)
#OODebtCodeX=X,15,S
T(2,#OODebtCode+ - +#OODebtCode_Tmp)
#OONonGageAmt=M,9,S
#OOPeriod=M,3,S
#OORate=m,2.2,S
#OOMonthPayAmt=M,9,S
#OOReceYearIncome=M,9,S
#OOReceYear=A,3,S
#OOReceYear2Income=M,9,S
#OOReceYear2=A,3,S
#OOCurrentMonthIncome=M,9,S
#OOLivingCost=M,9,S
#OOCompName=X,40,S
#OOCompId=A,8,S
#OOCarCnt=A,2,S
#OOHouseCnt=M,2,S
#OOLandCnt=M,2,S
#OOChildCnt=M,2,S
#OOChildRate=m,3.1,S
#OOParentCnt=M,2,S
#OOParentRate=m,3.1,S
#OOMouthCnt=M,2,S
#OOMouthRate=m,3.1,S
#OOGradeType=X,2,S
#OOGradeType_Tmp=X,10,S
T(H,#OOGradeType,#GradeTypeDscp)
#OOGradeTypeX=X,15,S
T(2,#OOGradeType+ - +#OOGradeType_Tmp)
#OOPayLastAmt=M,9,S
#OOPeriod2=M,3,S
#OORate2=m,2.2,S
#OOMonthPayAmt2=M,9,S
#OOPayLastAmt2=M,9,S
! 以下固定
#OOLastUpdate=X,30,S
#OOLastUpdateEmpNo=X,6,S
#OOLastUpdateEmpNoName=X,50,S
#OOLastUpdate_Combine=X,57,L
T(2,#OOLastUpdateEmpNo+ +#OOLastUpdateEmpNoName)
#OOOutJcicTxtDate=D,7,S
C(3,#OOOutJcicTxtDate,0,S,$)
</sub>

!------ 上行電文 ------
<sub type="TIM">
#ChainCd
#Ukey
</sub>
!------ 下行電文TOM ------
<sub type="TOM">
TXFORM=L8035
#OOTranKey
#OODebtCode
#OONonGageAmt
#OOPeriod
#OORate
#OOMonthPayAmt
#OOReceYearIncome
#OOReceYear
#OOReceYear2Income
#OOReceYear2
#OOCurrentMonthIncome
#OOLivingCost
#OOCompName
#OOCompId
#OOCarCnt
#OOHouseCnt
#OOLandCnt
#OOChildCnt
#OOChildRate
#OOParentCnt
#OOParentRate
#OOMouthCnt
#OOMouthRate
#OOGradeType
#OOPayLastAmt
#OOPeriod2
#OORate2
#OOMonthPayAmt2
#OOPayLastAmt2
#OOOutJcicTxtDate
#OOLastUpdate
#OOLastUpdateEmpNo
#OOLastUpdateEmpNoName
^
<include src="HELPRIM.icf::HELPRIM.tom"/>
<include src="COM.icf::TRCTL.tom"/>
<include src="ROM.icf::L8R01.tom"/>
<include src="ROM.icf::L8R55.tom"/>
<include src="ROM.icf::L8R57.tom"/>
</sub>

!---------- 單據輸出組合 ----------
<sub type="PART" name="L8035" layout="cols=3;screen.width=[250,250,100,250];printer.width=[20,20,20,20];order=1">
[
["[L8035]                                 消債條列JCIC報送資料歷程查詢(044)                                                                            "],
]
</sub>

<sub type="SELECT">

#RPTFG=0,QUERY.GRID,L8035
#any={detail:true, header:'L8035.part', caption:'', width:1000, rowNum:20, rowList:[20,40,60]}
#OOTranKeyX=交易代碼
{width:100,align:'center'}
!L8305(44)
#OODebtCodeX=負債主因
{width:150,align:'left'}
#OONonGageAmt=無擔保金融債務協商總金額
{width:200,align:'right'}
#OOPeriod=期數
{width:100,align:'left'}
#OORate=利率
{width:100,align:'left'}
#OOMonthPayAmt=協商方案估計月付金
{width:150,align:'right'}
#OOReceYearIncome=最近年度綜合所得總額
{width:200,align:'right'}
#OOReceYear=最近年度別
{width:100,align:'center'}
#OOReceYear2Income=前兩年度當年綜合所得總額
{width:200,align:'right'}
#OOReceYear2=前兩年度別
{width:100,align:'center'}
#OOCurrentMonthIncome=目前每月收入
{width:100,align:'right'}
#OOLivingCost=生活支出總額
{width:100,align:'right'}
#OOCompName=目前主要所得來源公司名稱
{width:200,align:'left'}
#OOCompId=目前主要所得公司統編
{width:150,align:'center'}
#OOCarCnt=債務人名下車輛數量
{width:150,align:'left'}
#OOHouseCnt=債務人名下建物比數
{width:150,align:'left'}
#OOLandCnt=債務人名下土地比數
{width:150,align:'left'}
#OOChildCnt=撫養子女人數
{width:150,align:'left'}
#OOChildRate=撫養子女責任比率
{width:150,align:'left'}
#OOParentCnt=撫養父母人數
{width:150,align:'left'}
#OOParentRate=撫養父母責任比率
{width:150,align:'left'}
#OOMouthCnt=其他法定撫養人數
{width:150,align:'left'}
#OOMouthRate=其他法定撫養人之責任比率
{width:200,align:'left'}
#OOGradeTypeX=屬二階段還款方案之階段註記
{width:200,align:'left'}
#OOPayLastAmt=第一階段最後一期應繳金額
{width:200,align:'right'}
#OOPeriod2=第二階段期數
{width:100,align:'left'}
#OORate2=第二階段利率
{width:100,align:'left'}
#OOMonthPayAmt2=第二階段協商方案估計月付金
{width:200,align:'right'}
#OOPayLastAmt2=第二階段最後一期應繳金額
{width:200,align:'right'}
#OOOutJcicTxtDate=資料轉出日期
{width:200,align:'center'}
#OOLastUpdate=最後更新日期時間
{width:200,align:'center'}
#OOLastUpdate_Combine=最後更新人員
{width:120,align:'center'}
^

<include src="PRT.icf::INQ01.sel"/>
</sub>