----- BASIC LABEL Variables ----------
<sub type="SYS">
</sub>

<sub type="SYS" name="label">

!#TXCD
!T(3,L1906)

![資料表頭(HEADER)長度]
#INQHD=n,3,S
E(0,0)ASGN(INQHD$)

![每筆資料明細(OCCURS)長度]
#INQLEN=n,3,S
E(0,68)ASGN(INQLEN$)

![多筆查詢之一個畫面有N筆資料]
#INQREC=n,2,S
E(0,20)ASGN(INQREC$)

![畫面顯示的明細間的高度]
#LOOPH=n,3,S
E(0,1)ASGN(LOOPHEIGHT$)

![每張印錄單列印的筆數]
#INQPRT=n,2,S
E(0,40)ASGN(INQPRT$)

</sub>

<sub type="DC" name="BFHEAD">
<include src="COM.icf::BFHEAD.dec"/>
!起始交易記號  0:起始交易,1:非起始交易

#ORGFG=_,_,S
E(0,0)


#FirstIn=A,1,S
E(0,0)

#BTNADDBUF=X,18,S
T(2,1)


#BtnAddA=x,100,S
T(2,{cmd=CHAIN; ntxcd=L1106; ntxbuf=#BTNADDBUF; ntxbuf5=type})
ASGN(BTN_NEW1$)
K(MODIFYBUTTON,1,新增)

</sub>

!---------- 交易畫面及個別交易變數宣告 ----------
<sub type="DC" name="p1" layout="cols=1;screen.width=[150,850];printer.width=[20,20];">
[
["[L1906]                                 關聯戶資料查詢"],
["#FdCustId+統一編號",#CustId],
! ["@顯示方式",
! <include src="COM.icf::RPTFG.scr"/>
! ],
]

#FdCustId=X,2,L
T(3,*)

!---------- AP Button AREA ----------
![Buttom資料查詢]
#Submit=A,1,S
K(MODIFYBUTTON,查詢)
!---------- AP TEXT AREA Variables ----------
<include src="HELPRIM.icf::HELPRIM.rtn"/>
!EnableFg
#CDDEF0001=x,20,S
T(3,CdCode.CustRelType)
#RelTypeCodeHelp=x,1024,S

#CDDEF0002=x,30,S
T(3,CdCode.CustRelationType)
#RelationCodeHelp=x,1024,S

#CDDEF0003=x,30,S
T(3,CdCode.CustRelRemark)
#RemarkTypeCodeHelp=x,1024,S

#CDDEF0004=x,30,S
T(3,CdCode.RelStatus)
#StatusHelp=x,1024,S

#HelpRim=X,1,S
RESET_RIM(#HelpRim,XXR99)
S(XXR99,01,#CDDEF0001,#CDDEF0002,#CDDEF0003,#CDDEF0004)
R(1,XXR99)
CALL(#HelpProc)
T(2,@RelTypeCodeHelp,#HelpDesc1)
T(2,@RelationCodeHelp,#HelpDesc2)
T(2,@RemarkTypeCodeHelp,#HelpDesc3)
T(2,@StatusHelp,#HelpDesc4)


#CHAIN=A,1,S
T(4,CHAIN$)

#NTXBUF=X,10,S
C(3,#CHAIN,1,T(4,NTXBUF$),S)
T(1,@CustId,#NTXBUF,1,10)

! #BUF2=X,42,S
! BIND(#BTN2,click, {cmd=CHAIN; ntxcd=L1001; ntxbuf=#BUF2;ntxbuf5=type<-1:CustId<-OOCustId:CustName<-OOCustName})

!統一編號
#CustId=X,11,I
@A(ID_UNINO,0,#CustId)
V(7)

#RPTFG=A,1,S
E(0,0)

#RETURN=A,1,S
E(0,0)

![折返KEY]
#RTNTXT=X,9,S

#FunCd=A,1,S
E(0,2)
E(0,@FirstIn,0)

! #BUF1=X,11,S
! C(4,#CustId,HIDE(#BTN1),SHOW(#BTN1))
! T(2,1+#CustId)
! E(0,@FirstIn,0)

! #BIND1=X,1,S
! BIND(#BTN1,click, {cmd=CHAIN; ntxcd=L1106; ntxbuf=#BUF1})

! <include src="COM.icf::RPTFG.dec"/>

</sub>

!---------- 輸出共用變數宣告區 ----------
<sub type="RTN" name="AFXMT">
<include src="PRT.icf::PRTHEAD.rtn"/>
</sub>


!---------- TXFORM = L1906 ----------
<sub type="FORM" name="L1906">

!#SCRPRT=_,_,S
!C(5,#TXFORM,L1906,$,S)

#SCRTIL=_,_,S
T(3,[L1906] 關聯戶資料)

!------ TOM(HEAD)   Variables (FOR OUTPUT SCREEN) ------
!------ TOM(OCCURS) Variables (FOR OUTPUT SCREEN) ------
! #OCustId=X,10,L
! T(2,#CustId)

! #OCustName=X,100,L
! T(2,#CustName)

#LOOP=X,1,S
T(3,1)ASGN(LOOP$)
! 客戶識別碼
#OOCustRelMainUKey=X,32,S
! 關聯戶識別碼
#OOUkey=X,32,S
! 客戶統編
#OOCustRelId=X,11,O
! 客戶名稱
#OOCustRelName=X,35,O
! 關係別
#OORelTypeCode=X,1,O
#OORelTypeCodeX=X,20,O
T(H,#OORelTypeCode,#RelTypeCodeHelp)
! 關係人統編
#OORelId=X,11,O
! 關係人名稱
#OORelName=X,35,O
! 關係
#OORelationCode=A,2,O
#OORelationCodeX=X,20,O
T(H,#OORelationCode,#RelationCodeHelp)
! 備註
#OORemark=X,50,O
! 狀態
#OOStatus=A,1,O
#OOStatusX=X,6,O
T(H,#OOStatus,#StatusHelp)
! 說明
#OONote=x,500,O
! 建立日期
#OOCreateDate=X,30,O
! 最後修改時間
#OOLastUpdate=X,30,O
! 最後修改員工
#OOLastUpdateEmpNo=X,6,O
#OOLastUpdateEmpNoX=X,50,O
#Combine=X,57,O
T(2,#OOLastUpdateEmpNo+  +#OOLastUpdateEmpNoX)
!修改
#OOBUF1=X,65,S
T(2,2+#OOCustRelMainUKey+#OOUkey)

#OOBTN1=X,1,S
BIND(grid,{ cmd=CHAIN; ntxcd=L1106; ntxbuf=#OOBUF1})

</sub>


!------ 上行電文 ------
<sub type="TIM">
#CustId
#RETURN
#END
#RTNTXT
</sub>


!------ 下行電文TOM ------
<sub type="TOM">

TXFORM=L1906
#OOCustRelMainUKey
#OOUkey
#OOCustRelId
#OOCustRelName
#OORelTypeCode
#OORelId
#OORelName
#OORelationCode
#OORemark
#OOStatus
#OONote
#OOCreateDate
#OOLastUpdate
#OOLastUpdateEmpNo
#OOLastUpdateEmpNoX
^
<include src="HELPRIM.icf::HELPRIM.tom"/>
<include src="COM.icf::TRCTL.tom"/>
</sub>

!--------- OUTPUT畫面 --------
<sub type="PART" name="L1906" layout="cols=1;screen.width=[150,850];printer.width=[20,20];">
[
["[L1906]                                 關聯戶資料查詢                                                                       "],
[""],
]
</sub>

!---------- 單據輸出組合 ----------
<sub type="SELECT">
#RPTFG=0,QUERY.GRID,L1906
#any={detail:true, header:'L1906.part', caption:'', width:1000, rowNum:20, rowList:[20,40,60]}

#OOBTN1=修改
{width:50,search:false,formatter:'cust:bind-button:修改',align:'center',canExport:false}

#OOCustRelId=客戶統編
{width:100}

#OOCustRelName=客戶名稱
{width:100}

#OORelTypeCodeX=關係別
{width:80}

#OORelId=關係人統編
{width:110}

#OORelName=關係人名稱
{width:110}

#OORelationCodeX=關係
{width:80,align:'center'}

#OORemark=備註
{width:150}

#OOStatusX=狀態
{width:80,align:'center'}

#OONote=說明
{width:110}

#OOCreateDate=建立日期
{width:140,align:'center'}

#OOLastUpdate=最後修改時間
{width:140,align:'center'}

#Combine=最後修改員工
{width:120}

^
<include src="PRT.icf::INQ01.sel" map="i=L1906;cpi=15"/>

@^
</sub>